<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý đơn hàng</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>

<div class="container mt-5">
    <div class="row tool-section">
        <!-- Form Tìm Kiếm -->
        <form action="" method="get" class="col-md-6 mb-3">
            <div class="input-group">
                <!-- Ô Nhập Tìm Kiếm -->
                <input type="text" class="form-control" placeholder="Tìm kiếm đơn hàng" name="keyword" id="search-input" value="">

                <!-- Nút Dropdown Tìm Theo -->
                <div class="input-group-append">
                    <button type="button" class="btn btn-outline-secondary" id="dropdownButton">Tìm theo</button>
                    <div class="dropdown-menu" id="dropdownMenu">
                        <button class="dropdown-item" type="button" data-option="username">Tên người dùng</button>
                        <button class="dropdown-item" type="button" data-option="email">Email</button>
                        <button class="dropdown-item" type="button" data-option="phone">Số điện thoại</button>
                        <button class="dropdown-item" type="button" data-option="address">Địa chỉ</button>
                    </div>
                </div>

                <!-- Ô Ẩn Lưu Tùy Chọn Tìm Kiếm -->
                <input type="hidden" id="search_option" name="search_by" value="">

                <!-- Nút Tìm Kiếm -->
                <div class="input-group-append">
                    <button class="btn btn-dark" type="submit">Tìm kiếm</button>
                </div>
            </div>
        </form>

        <!-- Lựa chọn Sắp Xếp -->
        <div class="col-md-4 mb-3">
            <select name="sort_by" class="form-control">
                <option value="">Sắp Xếp Theo</option>
                <option value="title-asc">Tiêu đề từ A - Z</option>
                <option value="title-desc">Tiêu đề từ Z - A</option>
                <option value="price-asc">Giá tiền A - Z</option>
                <option value="price-desc">Giá tiền Z - A</option>
            </select>
        </div>
    </div>

    <div class="row tool-section">
        <!-- Form Thay Đổi Nhiều -->
        <form method="post" action="/admin/orders/change-multi?_method=PATCH" class="col-md-4 mb-3">
            <div class="input-group">
                <select name="bulk_action" class="form-control">
                    <option value="">Thay đổi nhiều</option>
                    <option value="status-active">Hoạt động</option>
                    <option value="status-inactive">Không hoạt động</option>
                    <option value="highlighted-1">Nổi bật</option>
                    <option value="highlighted-0">Không nổi bật</option>
                    <option value="delete-true">Xóa</option>
                </select>
                <div class="input-group-append">
                    <button class="btn btn-dark" type="submit">Áp dụng</button>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- JavaScript thuần để xử lý dropdown -->
<script>
    // Biến tham chiếu tới dropdown
    const dropdownButton = document.getElementById('dropdownButton');
    const dropdownMenu = document.getElementById('dropdownMenu');
    const searchInput = document.getElementById('search-input');
    const searchOptionInput = document.getElementById('search_option');

    // Hiển thị hoặc ẩn dropdown khi nhấn nút
    dropdownButton.addEventListener('click', function() {
        dropdownMenu.classList.toggle('show');
    });

    // Hàm chọn tùy chọn tìm kiếm và đóng dropdown
    dropdownMenu.querySelectorAll('.dropdown-item').forEach(item => {
        item.addEventListener('click', function() {
            const option = this.getAttribute('data-option');
            searchOptionInput.value = option;

            // Đổi placeholder dựa trên tùy chọn
            switch (option) {
                case 'username':
                    searchInput.placeholder = 'Nhập tên người dùng';
                    break;
                case 'email':
                    searchInput.placeholder = 'Nhập email';
                    break;
                case 'phone':
                    searchInput.placeholder = 'Nhập số điện thoại';
                    break;
                case 'address':
                    searchInput.placeholder = 'Nhập địa chỉ';
                    break;
                default:
                    searchInput.placeholder = 'Tìm kiếm đơn hàng';
            }

            dropdownMenu.classList.remove('show');  // Đóng dropdown sau khi chọn
        });
    });

    // Đóng dropdown khi nhấn ra ngoài
    window.addEventListener('click', function(event) {
        if (!dropdownButton.contains(event.target) && !dropdownMenu.contains(event.target)) {
            dropdownMenu.classList.remove('show');
        }
    });
</script>

<style>
    /* Tùy chỉnh dropdown với Bootstrap */
    .dropdown-menu {
        display: none; /* Ẩn mặc định */
    }
    .dropdown-menu.show {
        display: block; /* Hiển thị khi có lớp .show */
    }
</style>

</body>
</html>
